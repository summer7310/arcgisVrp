/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"url:esri/dijit/geoenrichment/templates/InfographicsMainPage.html":'\ufeff\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 0" class\x3d"Wizard_TopPane"\x3e\n    \x3cdiv\x3e${nls.mainTitle}\x3c/div\x3e\n    \x3ctable class\x3d"InfographicsMainPage_CountryAndTheme"\x3e\n        \x3ctr\x3e\n            \x3ctd\x3e\n                \x3cdiv class\x3d"configureInfographicsStep configureInfographicsStepOne"\x3e\x3c/div\x3e\n            \x3c/td\x3e\n            \x3ctd class\x3d"Wizard_AlignRight"\x3e${nls.chooseCountry}\x3c/td\x3e\n            \x3ctd\x3e\n                \x3cselect data-dojo-type\x3d"dijit/form/Select"\n                    data-dojo-attach-point\x3d"countrySelect"\n                    data-dojo-props\x3d"maxHeight: 151"\n                    data-dojo-attach-event\x3d"onChange: _onCountryChanged"\x3e\n                \x3c/select\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd colspan\x3d"2" class\x3d"Wizard_AlignRight"\x3e${nls.chooseTheme}\x3c/td\x3e\n            \x3ctd\x3e\n                \x3cselect data-dojo-attach-point\x3d"themeSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange: _onThemeChange"\x3e\n                    \x3coption value\x3d"common"\x3e${nls.dark}\x3c/option\x3e\n                    \x3coption value\x3d"light"\x3e${nls.light}\x3c/option\x3e\n                \x3c/select\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd style\x3d"padding-top: 6px;"\x3e\n                \x3cdiv class\x3d"configureInfographicsStep configureInfographicsStepTwo"\x3e\x3c/div\x3e\n            \x3c/td\x3e\n            \x3ctd colspan\x3d"2"\x3e\n                \x3cdiv class\x3d"InfographicsMainPage_ChooseDataCollection"\x3e${nls.chooseDataCollection}\x3c/div\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/table\x3e\n\x3c/div\x3e\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 1" class\x3d"Wizard_CenterPane"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"itemsDiv" class\x3d"esriMapsInfoGraphicsItemsDiv"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"progressDiv" class\x3d"Wizard_Progress"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"row: 2" class\x3d"Wizard_BottomPane"\x3e\n    \x3cdiv class\x3d"InfographicsMainPage_AddVariables Wizard_Link" style\x3d"margin: 0 10px 0 10px;" data-dojo-attach-event\x3d"click: _onAddVariables"\x3e${nls.addVariables}\x3c/div\x3e\n\n    \x3ctable\x3e\n        \x3ctr\x3e\n            \x3ctd style\x3d"vertical-align: top; padding: 10px 0 0 8px;"\x3e\n                \x3cdiv class\x3d"configureInfographicsStep configureInfographicsStepThree"\x3e\x3c/div\x3e\n            \x3c/td\x3e\n            \x3ctd style\x3d"padding: 0;"\x3e\n                \x3cdiv data-dojo-type\x3d"esri/dijit/geoenrichment/BufferOptions"\n                    data-dojo-attach-point\x3d"bufferOptions"\n                    data-dojo-attach-event\x3d"onChange: _onBufferChange"\n                    class\x3d"InfographicsMainPage_BufferOptions"\x3e\n                \x3c/div\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/table\x3e\n\n    \x3cbutton class\x3d"Wizard_Button" data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"click: _onOK" disabled\x3d"disabled"\x3e${nls.ok}\x3c/button\x3e\n    \x3cbutton class\x3d"Wizard_Button" data-dojo-attach-event\x3d"click: _onCancel"\x3e${nls.cancel}\x3c/button\x3e\n\x3c/div\x3e'}});
define("esri/dijit/geoenrichment/InfographicsMainPage","require ../../declare dojo/_base/lang dojo/on dojo/dom-construct ./_WizardPage dojo/i18n!../../nls/jsapi dojo/text!./templates/InfographicsMainPage.html ./dom dijit/form/CheckBox ../../tasks/geoenrichment/GeoenrichmentTask ./config dijit/layout/ContentPane dijit/form/Select ./BufferOptions".split(" "),function(k,l,g,m,e,n,d,p,q,r,s,h){d=d.geoenrichment.dijit.InfographicsMainPage;return l("esri.dijit.geoenrichment.InfographicsMainPage",[n],{templateString:p,
nls:d,options:null,items:null,_eventMap:{"add-variables":!0,ok:!0,cancel:!0},constructor:function(){this._task=new s(h.server);this._task.token=h.token},startup:function(){this.inherited(arguments);this.countrySelect.addOption({value:"_",label:d.loading});this.countrySelect.set("disabled",!0);this.showProgress(this._task.getAvailableCountries(),"_onCountriesResponse")},_onCountriesResponse:function(a){this.countrySelect.set("disabled",!1);for(var b=[],c=0;c<a.length;c++)b.push({label:a[c].name,value:a[c].id});
this.countrySelect.set("options",b);this.countrySelect.set("value","US")},_getCountryAttr:function(){return this.countrySelect.get("value")},_setOptionsAttr:function(a){this._set("options",a);this.themeSelect.set("value",a.theme);this.bufferOptions.set("buffer",a.studyAreaOptions);this._renderItems()},_onCountryChanged:function(){this._renderItems()},_onThemeChange:function(a,b){var c=this.themeSelect.get("value");this.options.theme=c;this.progressPromises._onGetReports||this._renderItems()},_renderItems:function(){var a=
this.countrySelect.get("value");a&&"_"!=a&&(q.clear(this.itemsDiv),this.showProgress(this.options.getItems(a),"_onGetReports"))},_onGetReports:function(a){if(a){this.items=a;for(var b=0;b<a.length;b++){var c=e.create("div",{"class":"InfographicsMainPage_Item"},this.itemsDiv),f=(new r({"class":"InfographicsMainPage_ItemCheck",checked:a[b].isVisible,onChange:g.hitch(this,this._onCheckChange,b)})).placeAt(c);m(c,"click",g.hitch(this,this._toggleCheck,f));c=e.create("div",{"class":"InfographicsMainPage_ItemLabel",
innerHTML:a[b].title},c);f=k.toUrl("./themes/"+this.options.theme+"/images/"+a[b].type+".png");e.create("div",{"class":"InfographicsMainPage_ItemImage",style:"background-image:url('"+f+"')"},c)}this._enableOK();this.resize()}},_toggleCheck:function(a,b){"checkbox"!=b.target.type&&a.set("checked",!a.get("checked"))},_onCheckChange:function(a,b){var c=this.countrySelect.get("value");this.showProgress(this.options.getItems(c),function(c){c[a].isVisible=b});this._enableOK()},_enableOK:function(){var a=
!1;if(this.items)for(var b=0;b<this.items.length;b++)if(this.items[b].isVisible){a=!0;break}this.okButton.disabled=!a},_onBufferChange:function(){this.options.studyAreaOptions=this.bufferOptions.get("buffer")},_onAddVariables:function(){this.onAddVariables()},onAddVariables:function(){},_onOK:function(){this.onOK()},onOK:function(){},_onCancel:function(){this.onCancel()},onCancel:function(){}})});